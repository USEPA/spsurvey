<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Risk difference analysis — diffrisk_analysis • spsurvey</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Risk difference analysis — diffrisk_analysis"><meta property="og:description" content='This function organizes input and output for risk difference analysis (of
categorical variables).  The analysis data,
dframe, can be either a data frame or a simple features (sf) object.  If an
sf object is used, coordinates are extracted from the geometry column in the
object, arguments xcoord and ycoord are assigned values
"xcoord" and "ycoord", respectively, and the geometry column is
dropped from the object.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spsurvey</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">5.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/analysis.html">Analyzing Data</a>
    </li>
    <li>
      <a href="../articles/EDA.html">Summarizing and Visualizing Sampling Frames, Design Sites, and Analysis Data</a>
    </li>
    <li>
      <a href="../articles/sampling.html">Spatially Balanced Sampling</a>
    </li>
    <li>
      <a href="../articles/start-here.html">Start Here</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/USEPA/spsurvey/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Risk difference analysis</h1>
    <small class="dont-index">Source: <a href="https://github.com/USEPA/spsurvey/blob/HEAD/R/diffrisk_analysis.R" class="external-link"><code>R/diffrisk_analysis.R</code></a></small>
    <div class="hidden name"><code>diffrisk_analysis.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function organizes input and output for risk difference analysis (of
categorical variables).  The analysis data,
<code>dframe</code>, can be either a data frame or a simple features (<code>sf</code>) object.  If an
<code>sf</code> object is used, coordinates are extracted from the geometry column in the
object, arguments <code>xcoord</code> and <code>ycoord</code> are assigned values
<code>"xcoord"</code> and <code>"ycoord"</code>, respectively, and the geometry column is
dropped from the object.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">diffrisk_analysis</span><span class="op">(</span>
  <span class="va">dframe</span>,
  <span class="va">vars_response</span>,
  <span class="va">vars_stressor</span>,
  response_levels <span class="op">=</span> <span class="cn">NULL</span>,
  stressor_levels <span class="op">=</span> <span class="cn">NULL</span>,
  subpops <span class="op">=</span> <span class="cn">NULL</span>,
  siteID <span class="op">=</span> <span class="cn">NULL</span>,
  weight <span class="op">=</span> <span class="st">"weight"</span>,
  xcoord <span class="op">=</span> <span class="cn">NULL</span>,
  ycoord <span class="op">=</span> <span class="cn">NULL</span>,
  stratumID <span class="op">=</span> <span class="cn">NULL</span>,
  clusterID <span class="op">=</span> <span class="cn">NULL</span>,
  weight1 <span class="op">=</span> <span class="cn">NULL</span>,
  xcoord1 <span class="op">=</span> <span class="cn">NULL</span>,
  ycoord1 <span class="op">=</span> <span class="cn">NULL</span>,
  sizeweight <span class="op">=</span> <span class="cn">FALSE</span>,
  sweight <span class="op">=</span> <span class="cn">NULL</span>,
  sweight1 <span class="op">=</span> <span class="cn">NULL</span>,
  fpc <span class="op">=</span> <span class="cn">NULL</span>,
  popsize <span class="op">=</span> <span class="cn">NULL</span>,
  vartype <span class="op">=</span> <span class="st">"Local"</span>,
  conf <span class="op">=</span> <span class="fl">95</span>,
  All_Sites <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dframe</dt>
<dd><p>Data to be analyzed (analysis data). A data frame or
<code>sf</code> object containing survey design
variables, response variables, stressor variables, and subpopulation
(domain) variables.</p></dd>


<dt>vars_response</dt>
<dd><p>Vector composed of character values that identify the
names of response variables in <code>dframe</code>. Each response
variable must have two category values (levels), where one level is
associated with poor condition and the other level is associated with good
condition.</p></dd>


<dt>vars_stressor</dt>
<dd><p>Vector composed of character values that identify the
names of stressor variables in <code>dframe</code>. Each stressor
variable must have two category values (levels), where one level is
associated with poor condition and the other level is associated with good
condition.</p></dd>


<dt>response_levels</dt>
<dd><p>List providing the category values (levels) for each
element in the <code>vars_response</code> argument.  Each element in the list
must contain two values, where the first value identifies poor condition,
and the second value identifies good condition.  This argument must be
named and must be the same length as argument <code>vars_response</code>.  Names
for this argument must match the values in the <code>vars_response</code>
argument. If this argument equals NULL, then a named list is created that
contains the values <code>"Poor"</code> and <code>"Good"</code> for the first and
second levels, respectively, of each element in the <code>vars_response</code>
argument and that uses values in the <code>vars_response</code> argument as names
for the list.  If <code>response_levels</code> is provided without names,
then the names of <code>response_levels</code> are set to <code>vars_response</code>.
The default value is NULL.</p></dd>


<dt>stressor_levels</dt>
<dd><p>List providing the category values (levels) for each
element in the <code>vars_stressor</code> argument.  Each element in the list
must contain two values, where the first value identifies poor condition,
and the second value identifies good condition.  This argument must be
named and must be the same length as argument <code>vars_stressor</code>.  Names
for this argument must match the values in the <code>vars_stressor</code>
argument. If this argument equals NULL, then a named list is created that
contains the values <code>"Poor"</code> and <code>"Good"</code> for the first and
second levels, respectively, of each element in the <code>vars_stressor</code>
argument and that uses values in the <code>vars_stressor</code> argument as names
for the list.  If <code>stressor_levels</code> is provided without names,
then the names of <code>stressor_levels</code> are set to <code>vars_stressor</code>. 
The default value is NULL.</p></dd>


<dt>subpops</dt>
<dd><p>Vector composed of character values that identify the
names of subpopulation (domain) variables in <code>dframe</code>.
If a value is not provided, the value <code>"All_Sites"</code> is assigned to the
subpops argument and a factor variable named <code>"All_Sites"</code> that takes
the value <code>"All Sites"</code> is added to <code>dframe</code>.  The
default value is <code>NULL</code>.</p></dd>


<dt>siteID</dt>
<dd><p>Character value providing the name of the site ID variable in
<code>dframe</code>.  For a two-stage sample, the site ID variable
identifies stage two site IDs.  The default value is <code>NULL</code>, which
assumes that each row in <code>dframe</code> represents a unique site.</p></dd>


<dt>weight</dt>
<dd><p>Character value providing the name of the design weight
variable in <code>dframe</code>.  For a two-stage sample, the
weight variable identifies stage two weights.  The default value is
<code>"weight"</code>.</p></dd>


<dt>xcoord</dt>
<dd><p>Character value providing name of the x-coordinate variable in
<code>dframe</code>.  For a two-stage sample, the x-coordinate
variable identifies stage two x-coordinates.  Note that x-coordinates are
required for calculation of the local mean variance estimator.  If <code>dframe</code>
is an <code>sf</code> object, this argument is not required (as the geometry column
in <code>dframe</code> is used to find the x-coordinate). The default
value is <code>NULL</code>.</p></dd>


<dt>ycoord</dt>
<dd><p>Character value providing name of the y-coordinate variable in
<code>dframe</code>.  For a two-stage sample, the y-coordinate
variable identifies stage two y-coordinates.  Note that y-coordinates are
required for calculation of the local mean variance estimator.  If <code>dframe</code>
is an <code>sf</code> object, this argument is not required (as the geometry column
in <code>dframe</code> is used to find the t-coordinate). The default
value is <code>NULL</code>.</p></dd>


<dt>stratumID</dt>
<dd><p>Character value providing the name of the stratum ID
variable in <code>dframe</code>.  The default value is
<code>NULL</code>.</p></dd>


<dt>clusterID</dt>
<dd><p>Character value providing the name of the cluster
(stage one) ID variable in <code>dframe</code>.  Note that cluster
IDs are required for a two-stage sample.  The default value is <code>NULL</code>.</p></dd>


<dt>weight1</dt>
<dd><p>Character value providing the name of the stage one weight
variable in <code>dframe</code>.  The default value is
<code>NULL</code>.</p></dd>


<dt>xcoord1</dt>
<dd><p>Character value providing the name of the stage one
x-coordinate variable in <code>dframe</code>.  Note that x
coordinates are required for calculation of the local mean variance
estimator.  The default value is <code>NULL</code>.</p></dd>


<dt>ycoord1</dt>
<dd><p>Character value providing the name of the stage one
y-coordinate variable in <code>dframe</code>.  Note that
y-coordinates are required for calculation of the local mean variance
estimator.  The default value is <code>NULL</code>.</p></dd>


<dt>sizeweight</dt>
<dd><p>Logical value that indicates whether size weights should be
used during estimation, where <code>TRUE</code> uses size weights and
<code>FALSE</code> does not use size weights. To employ size weights for a
single-stage sample, a value must be supplied for argument weight.  To
employ size weights for a two-stage sample, values must be supplied for
arguments <code>weight</code> and <code>weight1</code>. The default value is
<code>FALSE</code>.</p></dd>


<dt>sweight</dt>
<dd><p>Character value providing the name of the size weight variable
in <code>dframe</code>.  For a two-stage sample, the size weight
variable identifies stage two size weights.  The default value is
<code>NULL</code>.</p></dd>


<dt>sweight1</dt>
<dd><p>Character value providing the name of the stage one size
weight variable in <code>dframe</code>.  The default value is
<code>NULL</code>.</p></dd>


<dt>fpc</dt>
<dd><p>Object that specifies values required for calculation of the
  finite population correction factor used during variance estimation. The
  object must match the survey design in terms of stratification and whether
  the design is single-stage or two-stage.  For an unstratified design, the
  object is a vector.  The vector is composed of a single numeric value for a
  single-stage design.  For a two-stage unstratified design, the object is a
  named vector containing one more than the number of clusters in the sample,
  where the first item in the vector specifies the number of clusters in the
  population and each subsequent item specifies the number of stage two units
  for the cluster.  The name for the first item in the vector is arbitrary.
  Subsequent names in the vector identify clusters and must match the cluster
  IDs.  For a stratified design, the object is a named list of vectors, where
  names must match the strata IDs.  For each stratum, the format of the
  vector is identical to the format described for unstratified single-stage
  and two-stage designs.  Note that the finite population correction factor
  is not used with the local mean variance estimator.</p>
<p>Example fpc for a single-stage unstratified survey design:</p>
<p><code>fpc &lt;- 15000</code></p>
<p>Example fpc for a single-stage stratified survey design:</p>
<p><code>fpc &lt;- list(
    Stratum_1 = 9000,
    Stratum_2 = 6000)
   </code></p>
<p>Example fpc for a two-stage unstratified survey design:</p>
<p><code>fpc &lt;- c(
    Ncluster = 150,
    Cluster_1 = 150,
    Cluster_2 = 75,
    Cluster_3 = 75,
    Cluster_4 = 125,
    Cluster_5 = 75)
  </code></p>
<p>Example fpc for a two-stage stratified survey design:</p>
<p><code>fpc &lt;- list(
    Stratum_1 = c(
      Ncluster_1 = 100,
      Cluster_1 = 125,
      Cluster_2 = 100,
      Cluster_3 = 100,
      Cluster_4 = 125,
      Cluster_5 = 50),
    Stratum_2 = c(
      Ncluster_2 = 50,
      Cluster_1 = 75,
      Cluster_2 = 150,
      Cluster_3 = 75,
      Cluster_4 = 75,
      Cluster_5 = 125))
  </code></p></dd>


<dt>popsize</dt>
<dd><p>Object that provides values for the population argument of the
  <code>calibrate</code> or <code>postStratify</code> functions in the survey package. If
  a value is provided for popsize, then either the <code>calibrate</code> or
  <code>postStratify</code> function is used to modify the survey design object
  that is required by functions in the survey package.  Whether to use the
  <code>calibrate</code> or <code>postStratify</code> function is dictated by the format
  of popsize, which is discussed below.  Post-stratification adjusts the
  sampling and replicate weights so that the joint distribution of a set of
  post-stratifying variables matches the known population joint distribution.
  Calibration, generalized raking, or GREG estimators generalize
  post-stratification and raking by calibrating a sample to the marginal
  totals of variables in a linear regression model. For the <code>calibrate</code>
  function, the object is a named list, where the names identify factor
  variables in <code>dframe</code>.  Each element of the list is a
  named vector containing the population total for each level of the
  associated factor variable.  For the <code>postStratify</code> function, the
  object is either a data frame, table, or xtabs object that provides the
  population total for all combinations of selected factor variables in the
  <code>dframe</code> data frame.  If a data frame is used for <code>popsize</code>, the
  variable containing population totals must be the last variable in the data
  frame.  If a table is used for <code>popsize</code>, the table must have named
  <code>dimnames</code> where the names identify factor variables in the
  <code>dframe</code> data frame.  If the popsize argument is equal to <code>NULL</code>,
  then neither calibration nor post-stratification is performed.  The default
  value is <code>NULL</code>.</p>
<p>Example popsize for calibration:</p>
<p><code>popsize &lt;- list(
    Ecoregion = c(
      East = 750,
      Central = 500,
      West = 250),
    Type = c(
      Streams = 1150,
      Rivers = 350))
  </code></p>
<p>Example popsize for post-stratification using a data frame:</p>
<p><code>popsize &lt;- data.frame(
    Ecoregion = rep(c("East", "Central", "West"),
      rep(2, 3)),
    Type = rep(c("Streams", "Rivers"), 3),
    Total = c(575, 175, 400, 100, 175, 75))
  </code></p>
<p>Example popsize for post-stratification using a table:</p>
<p><code>popsize &lt;- with(MySurveyFrame,
    table(Ecoregion, Type))</code></p>
<p>Example popsize for post-stratification using an xtabs object:</p>
<p><code>popsize &lt;- xtabs(~Ecoregion + Type,
    data = MySurveyFrame)</code></p></dd>


<dt>vartype</dt>
<dd><p>Character value providing the choice of the variance
estimator, where <code>"Local"</code> indicates the local mean estimator and <code>"SRS"</code> indicates the
simple random sampling estimator.  The default value is <code>"Local"</code>.</p></dd>


<dt>conf</dt>
<dd><p>Numeric value providing the Gaussian-based confidence level.  The default value
is <code>95</code>.</p></dd>


<dt>All_Sites</dt>
<dd><p>A logical variable used when <code>subpops</code> is not
<code>NULL</code>. If <code>All_Sites</code> is <code>TRUE</code>, then alongside the
subpopulation output, output for all sites (ignoring subpopulations) is
returned for each variable in <code>vars</code>. If <code>All_Sites</code> is
<code>FALSE</code>, then alongside the subpopulation output, output for all sites
(ignoring subpopulations) is not returned for each variable in <code>vars</code>.
The default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The analysis results. A data frame of population estimates for all combinations of
  subpopulations, categories within each subpopulation, response variables,
  and categories within each response variable.  Estimates are provided for
  proportion and size of the population plus standard error, margin of error,
  and confidence interval estimates. The data frame contains the following
  variables:</p>
<p></p>
<dl><dt>Type</dt>
<dd><p>subpopulation (domain) name</p></dd>

    <dt>Subpopulation</dt>
<dd><p>subpopulation name within a domain</p></dd>

    <dt>Response</dt>
<dd><p>response variable</p></dd>

    <dt>Stressor</dt>
<dd><p>stressor variable</p></dd>

    <dt>nResp</dt>
<dd><p>sample size</p></dd>

    <dt>Estimate</dt>
<dd><p>risk difference estimate</p></dd>

    <dt>Estimate_StressPoor</dt>
<dd><p>risk estimate for poor condition stressor</p></dd>

    <dt>Estimate_StressGood</dt>
<dd><p>risk estimate for good condition stressor</p></dd>

    <dt>StdError</dt>
<dd><p>risk difference standard error</p></dd>

    <dt>MarginofError</dt>
<dd><p>risk difference margin of error</p></dd>

    <dt>LCBxxPct</dt>
<dd><p>xx% (default 95%) lower confidence bound</p></dd>

    <dt>UCBxxPct</dt>
<dd><p>xx% (default 95%) upper confidence bound</p></dd>

    <dt>WeightTotal</dt>
<dd><p>sum of design weights</p></dd>

    <dt>Count_RespPoor_StressPoor</dt>
<dd><p>number of observations in the poor response and poor stressor group</p></dd>

    <dt>Count_RespPoor_StressGood</dt>
<dd><p>number of observations in the poor response and good stressor group</p></dd>

    <dt>Count_RespGood_StressPoor</dt>
<dd><p>number of observations in the good response and poor stressor group</p></dd>

    <dt>Count_RespGood_StressGood</dt>
<dd><p>number of observations in the good response and good stressor group</p></dd>

    <dt>Prop_RespPoor_StressPoor</dt>
<dd><p>weighted proportion of observations in the poor response and poor stressor group</p></dd>

    <dt>Prop_RespPoor_StressGood</dt>
<dd><p>weighted proportion of observations in the poor response and good stressor group</p></dd>

    <dt>Prop_RespGood_StressPoor</dt>
<dd><p>weighted proportion of observations in the good response and poor stressor group</p></dd>

    <dt>Prop_RespGood_StressGood</dt>
<dd><p>weighted proportion of observations in the good response and good stressor group</p></dd>

  
</dl></div>
    <div id="details">
    <h2>Details</h2>
    

<p>Risk difference measures the absolute strength of association between
conditional probabilities defined for a response variable and a stressor
variable, where the response and stressor variables are classified as either
good (i.e., reference condition) or poor (i.e., different from reference
condition). Risk difference is defined as the difference between two
conditional probabilities: the probability that the response variable is in
poor condition given that the stressor variable is in poor condition and the
probability that the response variable is in poor condition given that the
stressor variable is in good condition.  Risk difference values close to zero
indicate that the stressor variable has little or no impact on the
probability that the response variable is in poor condition.  Risk difference
values much greater than zero indicate that the stressor variable has a
significant impact on the probability that the response variable is in poor
condition.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index">
<dl><dt><code><a href="attrisk_analysis.html">attrisk_analysis</a></code></dt>
<dd><p>for attributable risk analysis</p></dd>

  <dt><code><a href="relrisk_analysis.html">relrisk_analysis</a></code></dt>
<dd><p>for relative risk analysis</p></dd>

  
</dl></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Tom Kincaid <a href="mailto:Kincaid.Tom@epa.gov">Kincaid.Tom@epa.gov</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">dframe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">  siteID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Site"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span>,</span>
<span class="r-in">  wgt <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span class="r-in">  xcoord <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>,</span>
<span class="r-in">  ycoord <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">100</span><span class="op">)</span>,</span>
<span class="r-in">  stratum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Stratum1"</span>, <span class="st">"Stratum2"</span><span class="op">)</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span class="r-in">  RespVar1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Poor"</span>, <span class="st">"Good"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span class="r-in">  RespVar2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Poor"</span>, <span class="st">"Good"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span class="r-in">  StressVar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Poor"</span>, <span class="st">"Good"</span><span class="op">)</span>, <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span class="r-in">  All_Sites <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"All Sites"</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span class="r-in">  Resource_Class <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Agr"</span>, <span class="st">"Forest"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">55</span>, <span class="fl">45</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">myresponse</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RespVar1"</span>, <span class="st">"RespVar2"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mystressor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"StressVar"</span><span class="op">)</span></span>
<span class="r-in"><span class="va">mysubpops</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"All_Sites"</span>, <span class="st">"Resource_Class"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">diffrisk_analysis</span><span class="op">(</span><span class="va">dframe</span>,</span>
<span class="r-in">  vars_response <span class="op">=</span> <span class="va">myresponse</span>,</span>
<span class="r-in">  vars_stressor <span class="op">=</span> <span class="va">mystressor</span>, subpops <span class="op">=</span> <span class="va">mysubpops</span>, siteID <span class="op">=</span> <span class="st">"siteID"</span>,</span>
<span class="r-in">  weight <span class="op">=</span> <span class="st">"wgt"</span>, xcoord <span class="op">=</span> <span class="st">"xcoord"</span>, ycoord <span class="op">=</span> <span class="st">"ycoord"</span>,</span>
<span class="r-in">  stratumID <span class="op">=</span> <span class="st">"stratum"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Type Subpopulation Response  Stressor nResp     Estimate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      All_Sites     All Sites RespVar1 StressVar   100 -0.037973184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      All_Sites     All Sites RespVar2 StressVar   100  0.080765266</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Resource_Class           Agr RespVar1 StressVar    55  0.077373530</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Resource_Class        Forest RespVar1 StressVar    45 -0.160101785</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Resource_Class           Agr RespVar2 StressVar    55 -0.002120854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Resource_Class        Forest RespVar2 StressVar    45  0.220818943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Estimate_StressPoor Estimate_StressGood   StdError MarginofError   LCB95Pct</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1           0.4277709           0.4657441 0.09165693     0.1796443 -0.2176175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2           0.5730444           0.4922791 0.09514689     0.1864845 -0.1057192</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           0.4477905           0.3704169 0.12564736     0.2462643 -0.1688908</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           0.3925336           0.5526354 0.14062332     0.2756167 -0.4357184</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           0.4970375           0.4991584 0.13590982     0.2663783 -0.2684992</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           0.7068276           0.4860086 0.13624365     0.2670326 -0.0462137</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    UCB95Pct WeightTotal Count_RespPoor_StressPoor Count_RespPoor_StressGood</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.1416711    5404.906                        23                        23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.2672497    5404.906                        26                        22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.3236378    2997.766                        15                         9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.1155149    2407.140                         8                        14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.2642575    2997.766                        15                        10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.4878516    2407.140                        11                        12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Count_RespGood_StressPoor Count_RespGood_StressGood Prop_RespPoor_StressPoor</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                        26                        28                0.2068686</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                        23                        29                0.2771224</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                        16                        15                0.2489805</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                        10                        13                0.1544240</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                        16                        14                0.2763628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                         7                        15                0.2780682</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Prop_RespPoor_StressGood Prop_RespGood_StressPoor Prop_RespGood_StressGood</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                0.2405118                0.2767281                0.2758915</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                0.2542146                0.2064743                0.2621887</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                0.1644577                0.3070396                0.2795222</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                0.3352269                0.2389792                0.2713699</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                0.2216163                0.2796572                0.2223636</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                0.2948113                0.1153350                0.3117855</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Dumelle, Tom Kincaid, Tony Olsen, Marc Weber.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

